---
import FilterDetailPage from '../../views/FilterDetailPage.astro';
import { getReleaseData } from '../../lib/release-data';
import { withBasePath } from '../../lib/paths';

export function getStaticPaths() {
  const { filtersData } = getReleaseData('main');
  return filtersData.filters.map((filter) => ({
    params: { filterId: filter.id },
    props: { filter },
  }));
}

const { filter } = Astro.props;
const { release, pluginData, filtersData, eventsData } = getReleaseData('main');

if (!filter) {
  return Astro.redirect(withBasePath(release.basePath, '/filters'));
}
---

<FilterDetailPage
  release={release}
  pluginData={pluginData}
  filtersData={filtersData}
  eventsData={eventsData}
  filter={filter}
/>
